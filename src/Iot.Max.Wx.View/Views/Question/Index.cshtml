
@{
    ViewData["Title"] = "高频问题列表";
    Layout = "~/Views/Shared/_LayoutSimple.cshtml";
}

<style>
    .nav-tabs .nav-item {
        flex: 1;
        text-align: center;
    }

    .media {
        padding: 20px 20px 0px 20px;
    }

    .card .btn {
        padding-left: 0px;
    }

    .card .row {
        text-align: right;
    }

    .info-search{
        position:fixed;
        z-index:999;
        background:#fff;
    }
</style>

<div class="input-group pb-1 pt-1 info-search">
    <input type="text" class="form-control" id="txtSearch" placeholder="只处理技能逻辑问题；不处理人事问题" aria-label="Recipient's username" aria-describedby="basic-addon2">
    <div class="input-group-append">
        <button class="btn btn-outline-success" id="btnSearch" type="button">搜索</button>
    </div>
</div>

<div>

    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">技能逻辑</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">人事问题</a>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="home-tab">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Card title1</h5>
                    <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                    <a href="#" class="btn btn-primary">Button</a>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Card title2</h5>
                    <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                    <a href="#" class="btn btn-primary">Button</a>
                </div>
            </div>
        </div>
        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="profile-tab">
            <div class="accordion" id="accordionExample">
                @*<div class="card">
            <div class="card-header" id="headingOne">
                <h2 class="mb-0">
                    <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        Collapsible Group Item #1
                    </button>
                </h2>
                <div class="row">
                    <div class="col-12">
                        <span class="badge badge-info">信息</span>
                        <span class="badge badge-pill badge-secondary">阅读量：356</span>
                    </div>
                </div>
            </div>

            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                <div class="card-body">
                    Some placeholder content for the first accordion panel. This panel is shown by default, thanks to the <code>.show</code> class.
                </div>
            </div>
        </div>
        <div class="card">
                <div class="card-header" id="headingTwo">
                    <h2 class="mb-0">
                        <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Collapsible Group Item #2
                        </button>
                    </h2>
                </div>
                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                    <div class="card-body">
                        Some placeholder content for the second accordion panel. This panel is hidden by default.
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header" id="headingThree">
                    <h2 class="mb-0">
                        <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Collapsible Group Item #3
                        </button>
                    </h2>
                </div>
                <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                    <div class="card-body">
                        And lastly, the placeholder content for the third and final accordion panel. This panel is hidden by default.
                    </div>
                </div>
            </div>*@
            </div>

        </div>
    </div>
</div>

<script type="text/javascript">
   
    init('');

    //加载数据
    function init(key) {
        var url = baseUrl + '/inter/question/list';
        if (key.length > 0)
            url = url + '?key=' + key;
        $.get(url, function (res) {
            $('#txtSearch').val('');

            var html = '';
            $.each(res.data, function (i, v) {
                var id1 = 'heading' + i;
                var id2 = 'collapse' + i;
                html += '<div class="card">';
                html += '    <div class="card-header" id="' + id1 + '">';
                html += '        <h2 class="mb-0">';
                html += '            <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#' + id2 + '" aria-expanded="false" aria-controls="' + id2 + '">';
                html += (i + 1) + '、' + v.title;
                html += '            </button>';
                html += '        </h2>';
                html += '        <div class="row">';
                html += '            <div class="col-12">';
                html += '                <span class="badge badge-info">' + v.categoryName + '</span>';
                html += '                <span class="badge badge-pill badge-secondary">阅读：' + v.readCount + '</span>';
                html += '            </div>';
                html += '        </div>';
                html += '    </div>';
                html += '    <div id="' + id2 + '" class="collapse" aria-labelledby="' + id1 + '" data-parent="#accordionExample">';
                html += '        <div class="card-body">';
                html += v.answer;
                html += '        </div>';
                html += '    </div>';
                html += '</div>';

            })
            $('#accordionExample').html(html);
        });
    }

    $('#btnSearch').on('click', function () {
        var key = $('#txtSearch').val();
        init(key);
    })
</script>
